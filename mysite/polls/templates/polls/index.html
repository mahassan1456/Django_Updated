{% extends 'polls/base.html' %}

{% block content %}
    {% if latest_question_list %}
    <h2>Questions by other Users</h2>
    <ul>
    {% for question in latest_question_list %}
        {% if question.user_p.id != request.user.id %}
        <li><a href="{% url 'polls:detail' question.id %}">{{ question.question_text }}

        </a>{% if question.user_p.username %} posted by {{ question.user_p.username }} {% else %} Unknown {% endif %}</li>
        {% endif %}
    {% endfor %}
    </ul>
    <h2>Questions by You!</h2>
    <ul>
        {% for question in latest_question_list %}
            {% if question.user_p.id == request.user.id %}
            <li><a href="{% url 'polls:detail' question.id %}">{{ question.question_text }}</a></li>
            {% endif %}
        {% endfor %}
        </ul>
    {% else %}
    <p>No polls are available.</p>
    {% endif %}
    <h2>Questions Answered by you!</h2>
    <ul>
        {% for choice in request.user.choice_set.all %}
            <li>Answered {{ choice.choice_text }} for {{ choice.question.question_text }}</li> 
            <h5>Other Users that answered Similar</h5>
            <ol>
                {% for user in Users %}
                 {% for choiceN in user.choice_set.all %}
                 {% if choiceN.question.id == choice.question.id and request.user.id != user.id %}
                <li>{{ user.username }} Answered {{ choiceN.choice_text }} </li>
                 {% endif %}
                 {% endfor %}
                {% endfor %}
            </ol>
        {% endfor %}
        </ul>
{% endblock %}
    
